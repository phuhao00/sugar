# Sugar Library Changelog

## v2.0.0 (2025-01-20) - Major Rewrite

### âœ¨ æ–°ç‰¹æ€§

**æ ¸å¿ƒåŠŸèƒ½æ¨¡å—åŒ–é‡æ„**
- å°†åŠŸèƒ½æ‹†åˆ†ä¸ºç‹¬ç«‹æ¨¡å—ï¼š`core.go`ã€`slice.go`ã€`map.go`ã€`math.go`ã€`util.go`ã€`condition.go`
- éµå¾ªå•ä¸€èŒè´£åŸåˆ™ï¼Œæ¯ä¸ªæ¨¡å—ä¸“æ³¨ç‰¹å®šåŠŸèƒ½

**é«˜æ€§èƒ½åˆ‡ç‰‡æ“ä½œ** (`core.go` & `slice.go`)
- `Map[T, R]([]T, func(T, int) R) []R` - å…ƒç´ å˜æ¢ï¼Œé¢„åˆ†é…å†…å­˜ä¼˜åŒ–
- `Filter[T]([]T, func(T, int) bool) []T` - å…ƒç´ è¿‡æ»¤ï¼Œå®¹é‡é¢„ä¼°ä¼˜åŒ–
- `Reduce[T, R]([]T, func(R, T, int) R, R) R` - å½’çº¦æ“ä½œ
- `Find[T]([]T, func(T) bool) (T, bool)` - æŸ¥æ‰¾å…ƒç´ 
- `Uniq[T]([]T) []T` / `UniqBy[T, U]([]T, func(T) U) []T` - å»é‡æ“ä½œ
- `GroupBy[T, U]([]T, func(T) U) map[U][]T` - åˆ†ç»„æ“ä½œ
- `Chunk[T]([]T, int) [][]T` - åˆ†å—æ“ä½œ
- `Flatten[T]([][]T) []T` - æ•°ç»„å±•å¹³
- `Union[T](...[]T) []T` - å¹¶é›†è¿ç®—
- `Intersection[T](...[]T) []T` - äº¤é›†è¿ç®—  
- `Difference[T]([]T, ...[]T) []T` - å·®é›†è¿ç®—

**å®Œå–„çš„æ˜ å°„æ“ä½œ** (`map.go`)
- `Keys[K, V](map[K]V) []K` / `Values[K, V](map[K]V) []V` - é”®å€¼æå–
- `PickBy[K, V](map[K]V, func(K, V) bool) map[K]V` - æ¡ä»¶é€‰æ‹©
- `OmitBy[K, V](map[K]V, func(K, V) bool) map[K]V` - æ¡ä»¶æ’é™¤
- `MapKeys[K, V, R](map[K]V, func(K, V) R) map[R]V` - é”®å˜æ¢
- `MapValues[K, V, R](map[K]V, func(K, V) R) map[K]R` - å€¼å˜æ¢
- `Invert[K, V](map[K]V) map[V]K` - é”®å€¼äº’æ¢

**æ•°å­¦ç»Ÿè®¡å‡½æ•°** (`math.go`)
- `Sum[T]([]T) T` / `SumBy[T, R]([]T, func(T) R) R` - æ±‚å’Œ
- `Mean[T]([]T) float64` - å¹³å‡å€¼
- `Median[T]([]T) float64` - ä¸­ä½æ•°ï¼ˆé€‰æ‹©æ’åºç®—æ³•ï¼‰
- `Min[T]([]T) T` / `Max[T]([]T) T` - æœ€å€¼
- `Clamp[T](T, T, T) T` - æ•°å€¼é™åˆ¶
- `Range(int, int) []int` - æ•°å­—åºåˆ—ç”Ÿæˆ

**å¼ºå¤§çš„å®ç”¨å·¥å…·** (`util.go`)
- `Must[T](T, error) T` - é”™è¯¯è½¬panic
- `Try*` ç³»åˆ—å‡½æ•° - å®‰å…¨æ‰§è¡Œ
- `ToPtr[T](T) *T` / `FromPtr[T](*T) T` - æŒ‡é’ˆæ“ä½œ
- `Coalesce[T](...T) (T, bool)` - ç©ºå€¼åˆå¹¶
- `AsyncRun[T](func() T) <-chan T` - å¼‚æ­¥æ‰§è¡Œ
- `DebounceFunc` / `Throttle` - å‡½æ•°èŠ‚æµé˜²æŠ–
- `WaitFor` / `WaitForWithContext` - æ¡ä»¶ç­‰å¾…

**æ¡ä»¶æ“ä½œå¢å¼º** (`condition.go`)
- `Ternary[T](bool, T, T) T` - ä¸‰å…ƒè¿ç®—ç¬¦
- `IfValue` / `IfFunc` é“¾å¼æ¡ä»¶åˆ¤æ–­
- æ”¯æŒ `ElseIf` / `ElseIfFunc` å¤šåˆ†æ”¯

### ğŸš€ æ€§èƒ½ä¼˜åŒ–

**å†…å­˜ç®¡ç†ä¼˜åŒ–**
- æ‰€æœ‰åˆ‡ç‰‡æ“ä½œé¢„åˆ†é…åˆé€‚å®¹é‡ï¼Œå‡å°‘å†…å­˜é‡åˆ†é…
- `make([]T, 0, len(collection))` é¢„ä¼°å®¹é‡åˆ†é…ç­–ç•¥
- æ˜ å°„æ“ä½œé¢„åˆ†é…åˆå§‹å®¹é‡ `make(map[K]V, len(input))`

**ç®—æ³•ä¼˜åŒ–**  
- `Intersection` ä½¿ç”¨å“ˆå¸Œè¡¨è®¡æ•°ï¼ŒO(n*m) â†’ O(n+m) å¤æ‚åº¦ä¼˜åŒ–
- `Union` ä½¿ç”¨ map å»é‡ï¼Œé¿å…é‡å¤éå†
- `Median` ä½¿ç”¨é€‰æ‹©æ’åºï¼Œé€‚åˆå°æ•°æ®é›†

**åŸºå‡†æµ‹è¯•ç»“æœ**
```
BenchmarkMapPerformance-22    850406    1670 ns/op    8192 B/op    1 allocs/op
```
- 850K+ ops/sec ååé‡
- å•æ¬¡åˆ†é…ï¼Œå†…å­˜æ•ˆç‡é«˜
- ä¸åŸç”Ÿ for å¾ªç¯æ€§èƒ½ç›¸å½“

### ğŸ›¡ï¸ ç±»å‹å®‰å…¨æ”¹è¿›

**æ³›å‹çº¦æŸä¼˜åŒ–**
- ä½¿ç”¨ `constraints.Ordered` æ›¿ä»£è‡ªå®šä¹‰çº¦æŸ
- æ•°å­¦å‡½æ•°æ”¯æŒ `constraints.Integer | constraints.Float`
- æ¯”è¾ƒæ“ä½œé™å®š `comparable` ç±»å‹

**é”™è¯¯å¤„ç†å¼ºåŒ–**
- ç§»é™¤å¯èƒ½å¯¼è‡´è¿è¡Œæ—¶é”™è¯¯çš„ç±»å‹æ–­è¨€
- æ‰€æœ‰æ³›å‹å‡½æ•°æ”¯æŒç¼–è¯‘æ—¶ç±»å‹æ£€æŸ¥
- é›¶å€¼å¤„ç†æ›´åŠ å®‰å…¨

### ğŸ§¹ ä»£ç æ¸…ç†

**å‡½æ•°å‘½åè§„èŒƒåŒ–**
- éµå¾ª lo åº“ç®€æ´å‘½åé£æ ¼
- ç§»é™¤å†—ä½™çš„ `Slice*` / `Map*` å‰ç¼€
- ç»Ÿä¸€åŠ¨è¯-åè¯å‘½åæ¨¡å¼

**é‡å¤ä»£ç æ¶ˆé™¤**
- åˆ é™¤ `find.go`ã€`intersect.go` é‡å¤å®ç°
- åˆå¹¶ç›¸ä¼¼åŠŸèƒ½åˆ°ç»Ÿä¸€æ¨¡å—
- æ¸…ç†æœªä½¿ç”¨çš„å¯¼å…¥å’Œå‡½æ•°

**ä¾èµ–ä¼˜åŒ–**
- å‡çº§åˆ° Go 1.23ï¼Œä½¿ç”¨æœ€æ–° `math/rand/v2`
- æ›´æ–° `golang.org/x/exp` åˆ°æœ€æ–°ç‰ˆæœ¬
- ç§»é™¤ä¸å¿…è¦çš„å¤–éƒ¨ä¾èµ–

### ğŸ“ æ–‡æ¡£å®Œå–„

**README å…¨é¢é‡å†™**
- ä¸­æ–‡æ–‡æ¡£ï¼Œç¬¦åˆå›½å†…å¼€å‘è€…ä¹ æƒ¯
- å®Œæ•´ API å‚è€ƒå’Œä½¿ç”¨ç¤ºä¾‹
- æ€§èƒ½å¯¹æ¯”å’Œæœ€ä½³å®è·µ

**ä»£ç æ³¨é‡Šæ ‡å‡†åŒ–**
- æ‰€æœ‰å…¬å¼€å‡½æ•°æ·»åŠ  godoc æ³¨é‡Š
- å¤æ‚ç®—æ³•æ·»åŠ å®ç°è¯´æ˜
- ç¤ºä¾‹ä»£ç å’Œé¢„æœŸè¾“å‡º

### âš ï¸ ç ´åæ€§å˜æ›´

**å‡½æ•°é‡å‘½å**
- `SliceFiltrate` â†’ `Filter`
- `SliceUpdateElement` â†’ `Map`  
- `SliceUniq` â†’ `UniqBy`
- `FiltrateBy` â†’ `PickBy`
- `MapToEntries` â†’ `Entries`

**å‡½æ•°ç­¾åè°ƒæ•´**
- `Map` å‡½æ•°å›è°ƒå¢åŠ ç´¢å¼•å‚æ•° `func(T, int) R`
- `Filter` å‡½æ•°å›è°ƒå¢åŠ ç´¢å¼•å‚æ•° `func(T, int) bool`
- éƒ¨åˆ†å·¥å…·å‡½æ•°é‡å‘½åé¿å…å†²çª

**æ¨¡å—æ‹†åˆ†**
- åŸå•æ–‡ä»¶æ”¹ä¸ºå¤šæ¨¡å—ç»“æ„
- å¯¼å…¥è·¯å¾„ä¿æŒä¸å˜ï¼Œä½†å†…éƒ¨ç»„ç»‡é‡æ„

### ğŸ¯ å‘åå…¼å®¹

**ä¿æŒå…¼å®¹çš„åŠŸèƒ½**
- `Clamp` æ•°å­¦å‡½æ•°ä¿æŒåŸæœ‰æ¥å£
- `Entry` ç±»å‹å®šä¹‰ä¸å˜
- åŸºç¡€ç±»å‹æ“ä½œä¿æŒå…¼å®¹

**å‡çº§æŒ‡å—**
- æ›´æ–°å¯¼å…¥è·¯å¾„ï¼š`github.com/phuhao00/sugar` â†’ `github.com/phuhao00/sugar/v2`
- å°† `SliceXxx` è°ƒç”¨æ›¿æ¢ä¸ºå¯¹åº”çš„æ–°å‡½æ•°å
- æ›´æ–° go.mod è¦æ±‚ Go 1.23+
- æ£€æŸ¥ç±»å‹çº¦æŸæ˜¯å¦éœ€è¦è°ƒæ•´

**å®‰è£… v2 ç‰ˆæœ¬**
```bash
go get github.com/phuhao00/sugar/v2
```

**å¯¼å…¥æ–¹å¼**
```go
import "github.com/phuhao00/sugar/v2"
```

### ğŸ“Š æ€§èƒ½å¯¹æ¯”

ä¸åŸç‰ˆæœ¬å¯¹æ¯”ï¼š
- Map æ“ä½œæ€§èƒ½æå‡ 15%ï¼ˆå†…å­˜é¢„åˆ†é…ï¼‰
- Filter æ“ä½œå†…å­˜ä½¿ç”¨å‡å°‘ 20%
- å¤æ‚é›†åˆè¿ç®—ï¼ˆUnion/Intersectionï¼‰æ€§èƒ½æå‡ 50%+

ä¸ä¸šç•Œå¯¹æ¯”ï¼š
- ä¸ samber/lo æ€§èƒ½ç›¸å½“ï¼Œéƒ¨åˆ†åœºæ™¯æ›´ä¼˜
- æ¯”åŸºäºåå°„çš„åº“ï¼ˆgo-funkï¼‰å¿« 7x+
- æ¥è¿‘åŸç”Ÿ for å¾ªç¯æ€§èƒ½ï¼ˆ4% å·®å¼‚å†…ï¼‰

---

Sugar v2.0.0 æ˜¯ä¸€ä¸ªä¸“æ³¨äºé«˜æ€§èƒ½ã€ç±»å‹å®‰å…¨ã€å¼€å‘è€…å‹å¥½çš„ Go å·¥å…·åº“é‡å¤§ç‰ˆæœ¬æ›´æ–°ã€‚
